import datetime

import pytest
from pypeal.peal import Peal
import pypeal.db
from unittest.mock import Mock


@pytest.fixture
def mock_database(mocker):
    mock = Mock()
    mocker.patch('pypeal.db.Database', return_value=mock)
    return mock


@pytest.fixture
def peal():
    return Peal(100,
                datetime.date(2021, 1, 1),
                'Place',
                'Association',
                'Address',
                'County',
                5000,
                'Title',
                120,
                'Weight',
                'Tone',
                id=1)


def test_get_ringers(peal, mock_database):
    mock_database.__query__.return_value = []
    assert peal.id == 1
